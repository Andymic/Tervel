<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>Tervel: tervel::thread::rc Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tervel
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">A collection of non-blocking data structures and algorithms.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Namespace&#160;List</span></a></li>
      <li><a href="namespacemembers.html"><span>Namespace&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacetervel.html">tervel</a></li><li class="navelem"><a class="el" href="namespacetervel_1_1thread.html">thread</a></li><li class="navelem"><a class="el" href="namespacetervel_1_1thread_1_1rc.html">rc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">tervel::thread::rc Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2421845b508e77341dfc74acbb6b581b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetervel_1_1thread_1_1rc.html#a2421845b508e77341dfc74acbb6b581b">watch</a> (<a class="el" href="classtervel_1_1thread_1_1_descriptor.html">Descriptor</a> *descr, std::atomic&lt; void * &gt; *address, void *val)</td></tr>
<tr class="memdesc:a2421845b508e77341dfc74acbb6b581b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method is used to increment the reference count of the passed descriptor object.  <a href="#a2421845b508e77341dfc74acbb6b581b">More...</a><br /></td></tr>
<tr class="separator:a2421845b508e77341dfc74acbb6b581b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a446fac41cfc0917c5a117b2949340009"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetervel_1_1thread_1_1rc.html#a446fac41cfc0917c5a117b2949340009">unwatch</a> (<a class="el" href="classtervel_1_1thread_1_1_descriptor.html">Descriptor</a> *descr)</td></tr>
<tr class="memdesc:a446fac41cfc0917c5a117b2949340009"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method is used to decrement the reference count of the passed descriptor object.  <a href="#a446fac41cfc0917c5a117b2949340009">More...</a><br /></td></tr>
<tr class="separator:a446fac41cfc0917c5a117b2949340009"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab06bbf0064e8a1869fc7120f297f70f5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetervel_1_1thread_1_1rc.html#ab06bbf0064e8a1869fc7120f297f70f5">is_watched</a> (<a class="el" href="classtervel_1_1thread_1_1_descriptor.html">Descriptor</a> *descr)</td></tr>
<tr class="memdesc:ab06bbf0064e8a1869fc7120f297f70f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method is used to determine if the passed descriptor is under rc rc protection.  <a href="#ab06bbf0064e8a1869fc7120f297f70f5">More...</a><br /></td></tr>
<tr class="separator:ab06bbf0064e8a1869fc7120f297f70f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a425dab081e18faf13246ee3f078de733"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetervel_1_1thread_1_1rc.html#a425dab081e18faf13246ee3f078de733">remove_descriptor</a> (void *expected, std::atomic&lt; void * &gt; *address)</td></tr>
<tr class="memdesc:a425dab081e18faf13246ee3f078de733"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method is used to remove a descriptor object that is conflict with another threads operation.  <a href="#a425dab081e18faf13246ee3f078de733">More...</a><br /></td></tr>
<tr class="separator:a425dab081e18faf13246ee3f078de733"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4acedf40b4268e7dc144e7c61c38ec37"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetervel_1_1thread_1_1rc.html#a4acedf40b4268e7dc144e7c61c38ec37">mark_first</a> (<a class="el" href="classtervel_1_1thread_1_1_descriptor.html">Descriptor</a> *descr)</td></tr>
<tr class="memdesc:a4acedf40b4268e7dc144e7c61c38ec37"><td class="mdescLeft">&#160;</td><td class="mdescRight">This returns the passed reference with its least signifcant bit set to 1.  <a href="#a4acedf40b4268e7dc144e7c61c38ec37">More...</a><br /></td></tr>
<tr class="separator:a4acedf40b4268e7dc144e7c61c38ec37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4098d37ce526c51ae73613c0d3bf820"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtervel_1_1thread_1_1_descriptor.html">Descriptor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetervel_1_1thread_1_1rc.html#ab4098d37ce526c51ae73613c0d3bf820">unmark_first</a> (void *descr)</td></tr>
<tr class="memdesc:ab4098d37ce526c51ae73613c0d3bf820"><td class="mdescLeft">&#160;</td><td class="mdescRight">This returns an unbitmarked reference.  <a href="#ab4098d37ce526c51ae73613c0d3bf820">More...</a><br /></td></tr>
<tr class="separator:ab4098d37ce526c51ae73613c0d3bf820"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9031cb6a39e2ab59f1a8642706874d33"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacetervel_1_1thread_1_1rc.html#a9031cb6a39e2ab59f1a8642706874d33">is_descriptor_first</a> (void *descr)</td></tr>
<tr class="memdesc:a9031cb6a39e2ab59f1a8642706874d33"><td class="mdescLeft">&#160;</td><td class="mdescRight">This returns whether or not the least signficant bit holds a bitmark.  <a href="#a9031cb6a39e2ab59f1a8642706874d33">More...</a><br /></td></tr>
<tr class="separator:a9031cb6a39e2ab59f1a8642706874d33"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a9031cb6a39e2ab59f1a8642706874d33"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tervel::thread::rc::is_descriptor_first </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>descr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This returns whether or not the least signficant bit holds a bitmark. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">the</td><td>reference to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>whether or not it holds a bitmark </dd></dl>

</div>
</div>
<a class="anchor" id="ab06bbf0064e8a1869fc7120f297f70f5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tervel::thread::rc::is_watched </td>
          <td>(</td>
          <td class="paramtype">Descriptor *&#160;</td>
          <td class="paramname"><em>descr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method is used to determine if the passed descriptor is under rc rc protection. </p>
<p>Internally calls on_is_watched</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">descr</td><td>the descriptor to be checked for rc protection. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a4acedf40b4268e7dc144e7c61c38ec37"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* tervel::thread::rc::mark_first </td>
          <td>(</td>
          <td class="paramtype">Descriptor *&#160;</td>
          <td class="paramname"><em>descr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This returns the passed reference with its least signifcant bit set to 1. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">descr</td><td>the reference to bitmark </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the bitmarked reference </dd></dl>

</div>
</div>
<a class="anchor" id="a425dab081e18faf13246ee3f078de733"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void* tervel::thread::rc::remove_descriptor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>expected</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::atomic&lt; void * &gt; *&#160;</td>
          <td class="paramname"><em>address</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method is used to remove a descriptor object that is conflict with another threads operation. </p>
<p>It first checks the recursive depth before proceding. Next it protects against the object being reused else where by acquiring either <a class="el" href="namespacetervel_1_1thread_1_1_h_p.html">HP</a> or RC watch on the object. Then once it is safe it will call the objects complete function This function must gurantee that after its return the object has been removed It returns the value.</p>
<p>REVIEW(carlos) see notes on watch </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>marked reference to the object and the address the object was dereferenced from. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab4098d37ce526c51ae73613c0d3bf820"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtervel_1_1thread_1_1_descriptor.html">Descriptor</a>* tervel::thread::rc::unmark_first </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>descr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This returns an unbitmarked reference. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">the</td><td>reference to remove the bitmark from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the unbitmarked reference </dd></dl>

</div>
</div>
<a class="anchor" id="a446fac41cfc0917c5a117b2949340009"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tervel::thread::rc::unwatch </td>
          <td>(</td>
          <td class="paramtype">Descriptor *&#160;</td>
          <td class="paramname"><em>descr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method is used to decrement the reference count of the passed descriptor object. </p>
<p>Then it will call on_unwatch and decrement any related objects necessary Internally calls on_unwatch</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">descr</td><td>the descriptor which no longer needs rc protection. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a2421845b508e77341dfc74acbb6b581b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tervel::thread::rc::watch </td>
          <td>(</td>
          <td class="paramtype">Descriptor *&#160;</td>
          <td class="paramname"><em>descr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::atomic&lt; void * &gt; *&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method is used to increment the reference count of the passed descriptor object. </p>
<p>If after increming the reference count the object is still at the address (indicated by *a == value), it will call on_watch. If that returns true then it will return true. Otherwise it decrements the reference count and returns false Internally calls on_watch</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">descr</td><td>the descriptor which needs rc protection </td></tr>
    <tr><td class="paramname">address</td><td>address it was derferenced from </td></tr>
    <tr><td class="paramname">val</td><td>the read value of the address </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if succesffully acquired a wat </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Apr 25 2014 13:17:00 for Tervel by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
